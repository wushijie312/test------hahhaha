function Moredd(e,a){var t=0,i=e.find(".CategoryList h3").height()+20;e.find(".CategoryList >div").each(function(){var e=$(this).height();t+=e+10,t+i>a&&$(this).remove();var r=$(this).find(".MaterNameList").height();$(this).find(".MaterNameList").css("max-height")&&r>=$(this).find(".MaterNameList").css("max-height").replace("px","")&&$(this).find(".P_more_s").css("display","")}),t+i>a&&$(".All_More_s").show()}$(document).ready(function(){var e=!0;$.ajax({type:"Get",url:"https://portal.yangguangqicai.com/Home/ReadMenuInfo?"+Math.random(),dataType:"jsonp",success:function(a,t){if(a.Success){var i,r=$(".LeftGoodsList.HeadMenu"),s=$('<div class="purchase mar_bottom10 categorytype HeadMenu "></div>'),o=$('<ul class="materielList HeadMenu OtherList"></ul>'),n="";s.append('<span class="Fleft PurZs '+(0==a.IsFilter?"active":"")+'" isfilter="0"><strong class="PurZsBg"></strong>专属物料</span>'),a.MenuInfo.CategoryExclusiveAndReference.Exclusive.length>0?$.each(a.MenuInfo.CategoryExclusiveAndReference.Exclusive,function(e,t){if(0==t.ParentID){i=$('<li isfilter="'+t.IsFilter+'"></li>'),n="";var r="javascript:";1==t.ChannelId?r="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId="+t.CategoryID:3==t.ChannelId&&(r="https://portal.yangguangqicai.com/ChannelProduct/Category?clid="+t.ChannelId+"&cid="+t.CategoryID),n+='<a href="'+r+'">',n+='<img class="MaterIcon" src="'+t.IconSrcOut+'" over="'+t.IconSrcOver+'" out="'+t.IconSrcOut+'" style="width:26px;height:26px;"/>',n+="<span>"+t.Aliases+"</span>",n+="</a>",n+='<div class="MaterBox " style="padding:10px;display: none;"><div class="overHidden CategoryList">',n+='<h3 class="MaterTitle mar_bottom20">'+t.Aliases+"</h3>";var s="",c=!1;s+='<div class="clearfix mar_bottom10">',s+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'" class="Fleft MaterName">'+t.Aliases+"></a>",s+='<div class="Fleft MaterNameList clearfix mar_left10">',$.each(a.MenuInfo.Products,function(e,a){a.CategoryID==t.CategoryID&&(c=!0,s+='<p><a href="https://item.yangguangqicai.com/product_big/'+a.CategoryID+"/"+a.ProductID+"?isFilter=0&relId="+a.ID+'">'+a.Aliases+" </a> </p>")}),s+='<a class="P_more_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'">更多></a>',s+="</div>",s+="</div>",c&&(n+=s),1==t.ChannelId?($.each(a.MenuInfo.CategoryExclusiveAndReference.Exclusive,function(e,i){i.ParentID==t.CategoryID&&(n+='<div class="clearfix mar_bottom10">',n+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+i.CategoryID+'" class="Fleft MaterName">'+i.Aliases+"></a>",n+='<div class="Fleft MaterNameList clearfix mar_left10">',$.each(a.MenuInfo.Products,function(e,a){a.CategoryID==i.CategoryID&&(n+='<p><a href="https://item.yangguangqicai.com/product_big/'+a.CategoryID+"/"+a.ProductID+"?isFilter=0&relId="+a.ID+'">'+a.Aliases+" </a> </p>")}),n+='<a class="P_more_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+i.CategoryID+'">更多></a>',n+="</div>",n+="</div>")}),n+='<a class="All_More_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'">更多商品展示></a>'):$.each(a.MenuInfo.CategoryExclusiveAndReference.Exclusive,function(e,i){if(i.ParentID==t.CategoryID){n+='<div class="clearfix mar_bottom10">';var r="https://portal.yangguangqicai.com/ChannelProduct/Category?clid="+t.ChannelId+"&cid="+t.CategoryID+"#ct"+i.CategoryID;n+='<a href="'+r+'" class="Fleft MaterName">'+i.Aliases+"></a>",n+='<div class="Fleft MaterNameList clearfix mar_left10">',$.each(a.MenuInfo.CategoryExclusiveAndReference.Exclusive,function(e,a){a.ParentID==i.CategoryID&&(n+='<p><a href="https://portal.yangguangqicai.com/ChannelProduct/Index?clid='+a.ChannelId+"&cid="+a.CategoryID+'" class="Fleft MaterName">'+a.Aliases+"</a></p>")}),n+="</div>",n+="</div>"}}),n+="</div></div>",i.append(n),o.append(i)}}):(i=$('<div isfilter="0">还没有专属物料</div>'),o.append(i));var c=[],l=[],d=0;if(a.MenuInfo.CategoryExclusiveAndReference.Reference.length>0&&(s.append('<span class="Fleft PurCk '+(1==a.IsFilter?"active":"")+'" isfilter="1"><strong class="PurCkBg"></strong>参考物料</span>'),$.each(a.MenuInfo.CategoryExclusiveAndReference.Reference,function(e,t){if(0==t.ParentID){if(!(d<8)){i=$('<li class="hide" isfilter="1"></li>'),n='<a href="javascript:;"><span >更多分类 》</span> </a>',n+='<div class="MaterBox " style="padding:10px;overflow:hidden; display: none; top: 0px;">',n+='<div class="Position overHidden CategoryList" style="padding:10px;overflow:auto;height: 630px;">',n+='<div class="clearfix section_nav_more">',d=0,$.each(a.MenuInfo.CategoryExclusiveAndReference.Reference,function(e,a){0==a.ParentID&&-1==c.indexOf(a)&&(l.push(a),0==d?(d++,n+='<p class="highlight">'+a.Aliases+"</p>"):n+=" <p>"+a.Aliases+"</p>")}),n+="</div>",n+='<div class="section_nav_detail">';for(var r=0;r<l.length;r++)n+=0==r?' <div class="section_a allhide allshow">':' <div class="section_b allhide">',$.each(a.MenuInfo.CategoryExclusiveAndReference.Reference,function(e,t){t.ParentID==l[r].CategoryID&&(n+='<div class="clearfix mar_bottom10">',n+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'" class="Fleft MaterName">'+t.Aliases+"&gt;</a>",n+='<div class="Fleft MaterNameList clearfix mar_left10">',0,$.each(a.MenuInfo.Products,function(e,a){a.CategoryID==t.CategoryID&&(n+=' <p><a href="https://item.yangguangqicai.com/product_big/'+a.CategoryID+"/"+a.ProductID+"?isFilter="+a.IsFilter+"&amp;relId="+a.ID+'">'+a.ProductName+"</a></p>")}),n+='<a class="P_more_s"  href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'">更多&gt;</a>',n+="</div>",n+="</div>")}),n+="</div>";return n+="</div>",n+="</div>",n+="</div>",i.append(n),o.append(i),!1}c.push(t),d++,i=$('<li class="hide" isfilter="'+t.IsFilter+'"></li>'),n="",n+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'&isFilter=1">',n+='<img class="MaterIcon" src="'+t.IconSrcOut+'" over="'+t.IconSrcOver+'" out="'+t.IconSrcOut+'" style="width:26px;height:26px;"/>',n+="<span>"+t.Aliases+"</span>",n+="</a>",n+='<div class="MaterBox" style="padding:10px;overflow:auto;display: none;"><div class="overHidden CategoryList">',n+='<h3 class="MaterTitle mar_bottom20">'+t.Aliases+"</h3>";var s="",g=!1;s+='<div class="clearfix mar_bottom10">',s+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'" class="Fleft MaterName">'+t.Aliases+"></a>",s+='<div class="Fleft MaterNameList clearfix mar_left10">',$.each(a.MenuInfo.Products,function(e,a){a.CategoryID==t.CategoryID&&(g=!0,s+='<p><a href="https://item.yangguangqicai.com/product_big/'+a.CategoryID+"/"+a.ProductID+"?isFilter=1&relId="+a.ID+'">'+a.Aliases+" </a> </p>")}),s+='<a class="P_more_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'">更多></a>',s+="</div>",s+="</div>",g&&(n+=s),$.each(a.MenuInfo.CategoryExclusiveAndReference.Reference,function(e,i){i.ParentID==t.CategoryID&&(n+='<div class="clearfix mar_bottom10">',n+='<a href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+i.CategoryID+'&isFilter=1" class="Fleft MaterName">'+i.Aliases+"></a>",n+='<div class="Fleft MaterNameList clearfix mar_left10">',$.each(a.MenuInfo.Products,function(e,a){a.CategoryID==i.CategoryID&&(n+='<p><a href="https://item.yangguangqicai.com/product_big/'+a.CategoryID+"/"+a.ProductID+"?isFilter=1&relId="+a.ID+'">'+a.Aliases+" </a> </p>")}),n+='<a class="P_more_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+i.CategoryID+'">更多></a>',n+="</div>",n+="</div>")}),n+='<a class="All_More_s" href="https://portal.yangguangqicai.com/CategorySpec/Index?categoryId='+t.CategoryID+'">更多商品展示></a>',n+="</div></div>",i.append(n),o.append(i)}})),a.MenuInfo.CategoryExclusiveAndReference.Reference.length>0&&r.append(s),null!=a.FreeOrder&&null!=a.FreeOrder&&(o.append($('<div style="height:80px;" isfilter="0"></div>')),o.append($('<div style="height:80px;" isfilter="1"></div>'))),r.append(o),null!=a.FreeOrder&&null!=a.FreeOrder){var g=$(a.FreeOrder);r.append(g)}$(".NavFirst").append(r),$(".NavFirst").hover(function(){$(".LeftGoodsList.HeadMenu").show()},function(){$(".LeftGoodsList.HeadMenu").hide()}),$(".materielList.HeadMenu").on("mouseenter","li",function(){$(this).index();$(this).addClass("hover").siblings().removeClass("hover"),$(this).find(".MaterIcon").attr("src",$(this).find(".MaterIcon").attr("over")),$(this).find(".MaterBox").show();var e=$(".LeftGoodsList").height()-20;$(".MaterBox").css("height",e+"px"),Moredd($(this),e)}),$(".materielList li").hover(function(){$(this).index();$(this).addClass("hover").siblings().removeClass("hover"),$(this).find(".MaterIcon").attr("src",$(this).find(".MaterIcon").attr("over")),$(this).find(".MaterBox").show(),Moredd($(this),$(this).find(".CategoryList").height())},function(){$(this).index();$(this).removeClass("hover"),$(this).find(".MaterIcon").attr("src",$(this).find(".MaterIcon").attr("out")),$(this).find(".MaterBox").hide()}),0==$(".categorytype").length?$(".HeadMenu .MaterBox").css("top","-2px"):($(".HeadMenu .MaterBox").css("top","-78px"),$(".categorytype.HeadMenu span").click(function(){var a=$(this).attr("isfilter");$(".LeftGoodsList.HeadMenu .materielList li[isfilter!="+a+"]").addClass("hide"),$(".LeftGoodsList.HeadMenu .materielList li[isfilter="+a+"]").removeClass("hide"),"1"==a?$(".LeftGoodsList.HeadMenu .materielList div[isfilter=0]").addClass("hide"):$(".LeftGoodsList.HeadMenu .materielList div[isfilter=0]").removeClass("hide"),$(this).addClass("active"),$(this).siblings().removeClass("active");null!=$(".FreeOder").height()&&e&&$(".FreeOder").height(),$(".HeadMenu .MaterBox").height($(".LeftGoodsList.HeadMenu").height()-22),$(".HeadMenu .MaterBox .CategoryList").height($(".LeftGoodsList.HeadMenu").height()-42),e||$.ajax({type:"Get",url:"https://portal.yangguangqicai.com/Home/AddUserPersonalization?"+Math.random(),data:{type:a},dataType:"jsonp",success:function(e,a){}}),e=!1}),$(".categorytype.HeadMenu span.active").click()),$(".section_nav_more p").click(function(){var e=$(this).index();$(this).addClass("highlight").siblings().removeClass("highlight"),$(this).parent(".section_nav_more").next().children().removeClass("allshow").eq(e).addClass("allshow")})}},error:function(e,a,t){}}),$(".iListBox").hover(function(){$(this).find(".oList").show()},function(){$(this).find(".oList").hide()}),$(".SearchBox .S_btn").click(function(){var e=$.trim($(".SearchBox .S_txt").val());if(""==e)return layer.msg("请输入搜索条件"),!1;self.location="https://portal.yangguangqicai.com/Home/Search?keywords="+e}),$(".SearchBox .S_txt").keydown(function(e){var a=e.which;if(13==a)return $(".SearchBox .S_btn").click(),!1})});var h=163;$(window).scroll(function(e){var a=$(window).scrollTop();$(window).height();a>=h?$(".MaterBox").css({top:a-h}):$(".MaterBox").css({top:0})});